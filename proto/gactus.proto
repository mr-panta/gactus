syntax = "proto3";
package gactus;

message Constant {
    enum ResponseCode {
        RESPONSE_OK                  = 0;
        RESPONSE_PROCESS_NOT_FOUND   = 1;
        RESPONSE_ERROR_SETUP_REQUEST = 2;
    }

    enum ContentType {
        CONTENT_TYPE_NULL                  = 0;
        CONTENT_TYPE_JSON                  = 1;
        CONTENT_TYPE_FORM_DATA             = 2;
        CONTENT_TYPE_X_WWW_FORM_URLENCODED = 3;
    }

    enum HttpMethod {
        HTTP_METHOD_NULL = 0;
        HTTP_METHOD_GET  = 1;
        HTTP_METHOD_POST = 2;
    }
}

message Request {
    string               log_id       = 1;
    string               command      = 2;
    bool                 is_proto     = 3;
    bytes                body         = 4;
    Constant.ContentType content_type = 5;
}

message Response {
    uint32 code = 1;
    bytes  body = 2;
}

message HttpConfig {
    Constant.HttpMethod method = 1;
    string              path   = 2;
}

message ProcessorRegistry {
    string     command     = 1;
    HttpConfig http_config = 2;
}

message RegisterProcessorsRequest {
    string   addr                                   = 1;
    repeated ProcessorRegistry processor_registries = 2;
}

message RegisterProcessorsResponse {
    string debug_message = 1;
}